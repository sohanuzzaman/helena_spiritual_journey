---
import BaseLayout from '../layouts/BaseLayout.astro';
import SectionHeader from '../components/SectionHeader.astro';
import CTAButton from '../components/CTAButton.astro';
import { getLocaleFromUrl } from '../i18n/ui';
import { t } from '../i18n/ui';
import { fetchTranslations } from '../i18n/uilm';

const locale = getLocaleFromUrl(Astro.url);
const skipCache = Astro.url.searchParams.has("nocache");
const tr = await fetchTranslations(locale, { skipCache });
---

<BaseLayout
  title={t(tr, "ERROR_404_TITLE")}
  lang={locale}
  skipToContent={t(tr, "SKIP_TO_CONTENT")}
  footerCopyright={t(tr, "FOOTER_COPYRIGHT")}
>
  <section class="relative min-h-screen flex items-center justify-center bg-abyss overflow-hidden">
    <!-- Atmospheric gradient overlay -->
    <div
      class="pointer-events-none absolute inset-0"
      style="background: radial-gradient(ellipse at 50% 40%, rgba(139,92,246,0.08) 0%, transparent 70%)"
      aria-hidden="true"
    ></div>

    <!-- Glow orb -->
    <div class="glow-orb w-[350px] h-[350px] bg-gold-solar/10 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2" aria-hidden="true"></div>

    <!-- Content -->
    <div class="relative z-10 max-w-[680px] mx-auto px-6 text-center">
      <SectionHeader label={t(tr, "ERROR_404_LABEL")} title={t(tr, "ERROR_404_TITLE")} tag="h1" />
      <p class="font-body text-lg text-moonstone/80 mb-10 leading-relaxed">
        {t(tr, "ERROR_404_MESSAGE")}
      </p>
      <CTAButton href={`/${locale}/`} text={t(tr, "ERROR_404_CTA")} animated external={false} />
    </div>
  </section>
</BaseLayout>
